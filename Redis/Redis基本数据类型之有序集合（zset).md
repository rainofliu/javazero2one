# Redis基本数据类型之有序集合（zset)

## 基本介绍

有序集合相对于哈希、列表、集合来说会有一点点陌生，但既然叫有序集合，那么它和集合必然有着联系，它保留了集合**不能有重复成员**的特性， 但不同的是，**有序集合中的元素可以排序**。但是它和列表使用索引下标作为 排序依据不同的是，**它给每个元素设置一个分数（score）作为排序的依据**。

> 有序集合中的**元素不能重复**，但是score可以重复

**列表、集合和有序集合三者的异同点**

| 数据结构 | 是否允许重复元素 | 是否有序 | 有序实现方式 | 应用场景           |
| -------- | ---------------- | -------- | ------------ | ------------------ |
| 列表     | 是               | 是       | 索引下标     | 时间轴、消息队列等 |
| 集合     | 否               | 否       | /            | 标签、社交等       |
| 有序集合 | 否               | 是       | 分值         | 排行榜系统、社交等 |

## 内部编码

1. `ziplist`（压缩列表）：当有序集合的元素个数小于`zset-max-ziplist- entries`配置（默认128个），同时每个元素的值都小于`zset-max-ziplist-value`配 置（默认64字节）时，Redis会用ziplist来作为有序集合的内部实现，ziplist 可以有效减少内存的使用。 
2. `skiplist`（跳跃表）：当ziplist条件不满足时，有序集合会使用skiplist作为内部实现，因为此时ziplist的读写效率会下降。

## 使用场景

有序集合比较典型的使用场景就是**排行榜系统**。例如视频网站需要对用户上传的视频做排行榜，榜单的维度可能是多个方面的：按照时间、按照播放数量、按照获得的赞数。
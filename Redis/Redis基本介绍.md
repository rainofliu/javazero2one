[toc]

# 简洁

Redis 是互联网技术领域使用最为广泛的存储中间件，它是「**Re**mote **Di**ctionary **S**ervice」的首字母缩写，也就是「**远程字典服务**」。Redis 以其超高的性能、完美的文档、简洁易懂的源码和丰富的客户端库支持在开源中间件领域广受好评。国内外很多大型互联网公司都在使用 Redis，比如 Twitter、YouPorn、暴雪娱乐、Github、StackOverflow、腾讯、阿里、京东、华为、新浪微博等等，很多中小型公司也都有应用。

# Redis特性

1. 速度快
   1. 基于内存
   2. IO多路复用
   3. 单线程，没有线程上下文切换
2. 丰富的数据结构
3. 持久化
4. 主从复制

# Redis可以用来干什么

+ 缓存
  + Redis不是万金油，用作缓存时，适用于热点数据（访问频率高且变化少的数据）
+ 分布式锁
+ 消息队列（pub/sub）

# Redis基础数据结构

> Redis 有 5 种基础数据结构，分别为：string (字符串)、list (列表)、set (集合)、hash (哈希) 和 zset (有序集合)。
>
> Redis中的key全部都是字符串类型，我们讨论的数据结构指的是value

## string(字符串)

> 字符串。

+ 适用场景：

  + 缓存用户信息

    > 将用户信息对象序列化成JSON字符串，然后将序列化后得到的字符串作为value保存到Redis当中

+ 动态字符串
  + Redis的字符串是动态字符串，是可以修改的字符串，和Java语言中的`ArrayList`类似
  + 属性
    + length    字符串中字符的数量
    + capacity  容量

## list(列表)

list相当于Java语言中的`LinkedList`链表，所以list的插入和删除都比较快  O(1) ，但是定位元素却很慢。

**列表结构常用来作为异步队列，将需要延后处理的任务结构体序列化成字符串塞进 Redis 的列表，另一个线程从这个列表中轮询数据进行处理。**

> 其实list的底层是fast list（快速链表）
>
> **首先在列表元素较少的情况下会使用一块连续的内存存储**，这个结构是 `ziplist`，也即是**压缩列表**。它将所有的元素紧挨着一起存储，分配的是一块连续的内存。
>
> **当数据量比较多的时候才会改成 `quicklist`。**
>
> 因为普通的链表需要的附加指针空间太大，会比较浪费空间，而且会加重内存的碎片化。
>
> 比如这个列表里存的只是 `int` 类型的数据，**结构上还需要两个额外的指针** `prev` 和 `next` 。
>
> 所以 Redis 将链表和 `ziplist` 结合起来组成了 `quicklist`。
>
> 也就是将多个 `ziplist` 使用双向指针串起来使用。这样既满足了快速的插入删除性能，又不会出现太大的空间冗余。

## hash（字典）

hash相当于Java中的`HashMap`，数组+链表

## set（集合）

Redis的集合相当于Java中的`HashSet` ，内部的键值对是无需的，唯一的。

> value中的 key value  value==null  ，有点像HashSet的底层实现

## zset（有序集合）

它类似于 Java 的 `SortedSet` 和 `HashMap` 的结合体，

+ 一方面它是一个 set，保证了内部 value 的唯一性，

+ 另一方面它可以给每个 value 赋予一个 score，代表这个 value 的排序权重。

  > 它的内部实现用的是一种叫做「**跳跃列表**」的数据结构。

# 总结

本文只是对Redis的极简入门，很多概念和原理并没有说清楚，在后面的章节中，会慢慢将原理说清楚。因为写到这里，作者也不会！！！哈哈，期待将Redis掌握得更深入些吧。